# è¿™ä¼šè®©ä¸€ä¸ªå°ç™½å­¦ä¼šå‘npmåŒ…

â€‹	ç›¸ä¿¡å‰ç«¯erå¯¹npmåŒ…ä¸ä¼šé™Œç”Ÿï¼Œ[npm](https://www.npmjs.com/) æœ¬æ¥æ˜¯ Node.js çš„åŒ…ç®¡ç†å·¥å…·ï¼Œä½†éšç€ JS è¿™å‡ å¹´çš„è“¬å‹ƒå‘å±•ï¼Œç°åœ¨çš„ npm å·²ç»æˆäº†å‡ ä¹æ‰€æœ‰è·Ÿ JS ç›¸å…³çš„å·¥å…·å’Œè½¯ä»¶åŒ…çš„ç®¡ç†å·¥å…·äº†ï¼Œè¿™æ¬¡ä¹Ÿä¼šä»0åˆ°1çš„èµ°ä¸€éå‘åŒ…çš„æµç¨‹ï¼Œ

> [å‘åŒ…é¡¹ç›®ä»£ç åœ¨è¿™é‡Œ](https://github.com/thomaszhou63/test-npm)ã€ [npmåŒ…åœ°å€åœ¨è¿™é‡Œ](https://www.npmjs.com/package/our-btn)

> 1ã€æœ¬æ–‡æ˜¯ä»¥vueé¡¹ç›®ä¸ºä¾‹å­è¿›è¡Œè®²è§£ï¼Œæµç¨‹å¯é€šç”¨ï¼Œåªæ˜¯å…·ä½“é¡¹ç›®çš„å®‰è£…æœ‰äº›è®¸åŒºåˆ«ï¼Œä¸ç®¡vueè¿˜æ˜¯reactï¼Œç›¸ä¿¡å¯¹å¤§å®¶éƒ½æœ‰å¸®åŠ©
>
> 2ã€**âš ï¸æç¤ºâš ï¸ï¼š**ä¸ºäº†è®©ç«¥é‹ä»¬ç†è§£å‘åŒ…çš„æµç¨‹å’Œé…ç½®ï¼Œæ‰€ä»¥è¿˜æ˜¯å»ºè®®æŒ‰ç…§æ­¥éª¤ï¼ˆ1ï¼‰-ï¼ˆ10ï¼‰çš„é¡ºåºæ¥æ“ä½œï¼Œä¸ºäº†çªå‡ºæ•´ä¸ªå‘åŒ…æµç¨‹ï¼Œæ‰€ä»¥å°è£…çš„æµ‹è¯•ç»„ä»¶éå¸¸ç®€å•ã€‚å¾…ç†è§£æ‰€æœ‰æ–‡ä»¶çš„å†…å®¹å’Œå…·ä½“åŸç†ï¼Œå¹¶æˆåŠŸå‘å‡ºä¸€ä¸ªæµ‹è¯•npmåŒ…åï¼Œç«¥é‹ä»¬å¯è‡ªè¡Œæ›´æ¢æˆè‡ªå·±çš„ç»„ä»¶ï¼Œå‘å¸ƒå±äºè‡ªå·±çš„npmåŒ…ï¼Œ**å‘å¸ƒåŒ…çš„åå­—è®¾ç½®ä¸º```our-btn```**

## åˆå§‹åŒ–webpacké¡¹ç›® + ç»„ä»¶å°è£… ===  ä¸€æ°”å‘µæˆ

â€‹	åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›å®‰è£…çš„æ’ä»¶ä½“ç§¯å°½å¯èƒ½çš„å°ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬åœ¨å‘åŒ…çš„æ—¶å€™ä¹Ÿè¦å°½é‡æ§åˆ¶æˆ‘ä»¬çš„ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©è‡ªå·±åˆ›å»ºä¸€ä¸ªæ‰“åŒ…é¡¹ç›®ï¼Œè€Œä¸æ˜¯ç”¨ç¬¨é‡çš„vueå’Œreactè„šæ‰‹æ¶ã€‚ è¯ä¸å¤šè¯´ï¼Œä¸‹é¢è·Ÿç€åšğŸ‘‡

- **ï¼ˆ1ï¼‰ä¸‹æ–¹æ˜¯æ¨èçš„ç›®å½•ç»“æ„ï¼Œæ ¹æ®ä»¥ä¸‹ç»“æ„å»ºç«‹é¡¹ç›®æ–‡ä»¶**

> ä½†æ˜¯ç”±äºæœ¬æ–‡ç»„ä»¶è¿‡äºç®€å•ï¼Œæ‰€ä»¥åˆ å‡```assets```ã€```utils```æ–‡ä»¶å¤¹ï¼ˆæœ‰æ²¡æœ‰è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸å½±å“npmå‘åŒ…ï¼Œä»…ä»…æ–¹ä¾¿ä½ è‡ªå·±æ•´ç†é¡¹ç›®ä»£ç ï¼‰

```
â”œâ”€â”€ src
â”‚ â”œâ”€â”€ assets # æœ¬åœ°é™æ€èµ„æºï¼ˆæœ¬æ–‡æ²¡æœ‰ï¼‰
â”‚ â”œâ”€â”€ components # ä¸šåŠ¡é€šç”¨ç»„ä»¶
â”‚ â”‚ â”œâ”€â”€ btnDemo.vue # æœ¬æ–‡éœ€è¦å°è£…çš„ç®€å•buttonç»„ä»¶
â”‚ â”œâ”€â”€ utils # å·¥å…·åº“ï¼ˆæœ¬æ–‡æ²¡æœ‰ï¼‰
â”‚ â””â”€â”€ index.js # åº”ç”¨å…¥å£ 
â”œâ”€â”€ .npmignore // ç”¨äºå¿½ç•¥ä¸éœ€è¦ä¸Šä¼ åˆ°npmçš„æ–‡ä»¶
â”œâ”€â”€ README.md
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
â””â”€â”€ webpack.config.js # webpacké…ç½®

// æ³¨æ„
# utils æ–‡ä»¶å¤¹ä¸€èˆ¬å­˜æ”¾çš„æ˜¯ä½ ç»„ä»¶ç»å¸¸ä½¿ç”¨çš„ä¸€äº›å·¥å…·å‡½æ•°
# assets æ–‡ä»¶å¤¹ä¸€èˆ¬å­˜æ”¾çš„æ˜¯ä½ ç»„ä»¶ç”¨åˆ°çš„æ ·å¼ã€å›¾ç‰‡ã€iconç­‰é™æ€èµ„æº
```

- **ï¼ˆ2ï¼‰```buttonç»„ä»¶```**

```js
// btnDemo.vue
<template>
  <div class="btn">
    <button>{{text}}</button>
  </div>
</template>

<script>
export default {
  name: 'btn', // ç»„ä»¶çš„nameå±æ€§ï¼ˆåé¢æœ‰æåˆ°è¿™é‡Œæœ‰ä¸ªå‘ï¼‰
  props: {
    text: { // æ–‡æœ¬
      type: String,
      default () {
        return ''
      }
    }
  },
  data () {
    return {
    }
  }
}
</script>
```

- **ï¼ˆ3ï¼‰```index.js ```**

è¯¥æ–‡ä»¶æ˜¯ä¸ºäº†å°†æˆ‘ä»¬çš„ç»„ä»¶æš´éœ²å‡ºå»

```js
// src/index.js
// è¿™é‡Œimport çš„ btnå’ŒbtnDemo.vueçš„nameå±æ€§åç›¸åŒ ï¼

import btn from './btnDemo.vue'

btn.install = Vue => Vue.component(btn.name, btn) // ç»™ç»„ä»¶é…ç½®installæ–¹æ³• 

export default dtable;
```

> âš ï¸ï¼ˆè¿™é‡Œæœ‰ä¸ªå‘ï¼‰ï¼šç”±äº```Vue.component(btn.name, btn)```çš„```btn.name```æ˜¯æŒ‡å‘```btnDemo.vue```çš„```name```å±æ€§ï¼Œå› æ­¤ï¼Œå»ºè®®åœ¨è¿™é‡Œæœ€å¥½ç”¨ç»„ä»¶çš„```name```å±æ€§å€¼ä½œä¸º```import```åˆ«å

- **ï¼ˆ4ï¼‰```webpack.config.js```**

> ```webpack.config.js```é…ç½®å¦‚ä¸‹ï¼Œç”±äºæˆ‘ä»¬ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯```webpack4```ï¼Œæ‰€æœ‰çš„é…ç½®éƒ½åœ¨```webpack.config.js```é‡Œé¢ï¼Œåœ¨æˆ‘ä»¬è¿™é‡Œä»…ä»…éœ€è¦æŠŠæˆ‘ä»¬çš„èµ„æºæ‰“åŒ…ï¼Œå†™çš„æ¯”è¾ƒç®€å•ï¼Œå…·ä½“```webpack```é…ç½®ç»†èŠ‚å¯ä»¥å­¦ä¹ [å®˜æ–¹æ–‡æ¡£](https://webpack.js.org/contribute/)

è¿™é‡Œé…ç½®æ˜¯ç”¨äºå°†`/src`ä¸­çš„å†…å®¹æ‰“åŒ…åˆ°`/dist`ï¼ˆæ‰“åŒ…æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆ`/dist`æ–‡ä»¶å¤¹ï¼‰ä¸­çš„```btn.js```ï¼Œ```btn.js```å…¶å®å°±ç›¸å½“äºæˆ‘ä»¬çš„æ’ä»¶ï¼ˆåé¢åœ¨```package.json```çš„```main```å­—æ®µä¹Ÿæ˜¯æŒ‡å‘è¿™é‡Œï¼‰

```js
// webpack.config.js
const path = require('path')
const { VueLoaderPlugin } = require('vue-loader')

module.exports = {
  entry: {
    index: path.join(__dirname, "/src/index.js") // å…¥å£æ–‡ä»¶ï¼ˆå°±æ˜¯åˆšæ‰ç”¨äºæš´éœ²ç»„ä»¶çš„index.jsï¼‰
  }, 
  output: {
    path: path.join( __dirname, "/dist"), // æ‰“åŒ…åçš„æ–‡ä»¶å­˜æ”¾åœ¨distæ–‡ä»¶å¤¹
    publicPath: '/dist/', // è®¾ç½®å…¬å…±è·¯å¾„
    filename: "btn.js", // æ‰“åŒ…åè¾“å‡ºæ–‡ä»¶çš„æ–‡ä»¶è®¾ç½®ä¸ºbtn.js
    libraryTarget: 'umd' // è¿™ä¸ªé€‰é¡¹ä¼šå°è¯•æŠŠåº“æš´éœ²ç»™å‰ä½¿ç”¨çš„æ¨¡å—å®šä¹‰ç³»ç»Ÿï¼Œè¿™ä½¿å…¶å’ŒCommonJSã€AMDå…¼å®¹æˆ–è€…æš´éœ²ä¸ºå…¨å±€å˜é‡
  },
  module: {
    rules: [
      {
        test: /\.vue$/,
        loader: 'vue-loader'
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      },
      {
        test: /\.(scss|sass)$/,
        use: ['style-loader', 'css-loader', 'sass-loader']
      },
      {
        test: /\.(png|jpg|svg|gif)$/,
        use: ['url-loader']
      },
      {
        test: /\.js$/,
        exclude: /node_modules|vue\/dist|vue-router\/|vue-loader\/|vue-hot-reload-api\//,
        loader: 'babel-loader'
      }
    ]
  },
  plugins: [
    new VueLoaderPlugin()
  ]
}
```

- **ï¼ˆ5ï¼‰```package.json```**

```package.json```å­—æ®µå¦‚ä¸‹ï¼Œè¦å¼ºè°ƒçš„æ˜¯ï¼Œå­—æ®µ```devDependencies```ä¸­çš„ä¾èµ–é¡¹ä¸å”¯ä¸€ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±æƒ…å†µå»å†™ï¼Œ**ä½†æ˜¯æ­¤æ—¶æ­¤åˆ»ï¼Œè¯·åŠ¡å¿…å’Œæˆ‘ä¸€æ ·ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†ä¿è¯ä½ å¯ä»¥æŒ‰ç…§æˆ‘çš„æ“ä½œï¼ŒæˆåŠŸå‘åŒ…**

```
// å…·ä½“å­—æ®µåé¢è¯¦ç»†è¯´æ˜
{
  "name": "our-btn", // å‘å¸ƒnpmåŒ…çš„åå­—
  "version": "1.0.0", // ä½ çš„npmåŒ…ç‰ˆæœ¬
  "description": "A test button", // åŒ…çš„æè¿°
  "main": "dist/btn.js", // *é‡ç‚¹*ï¼šæŒ‡å®šä½ ç»„ä»¶çš„ä¸»å…¥å£æ–‡ä»¶
  "scripts": {
    "build": "webpack --mode production",
    "dev": "webpack-dev-server --open --mode development"
  },
  "keywords": [
    "our-btn",
    "button"
  ],
  "repository": {
    "type": "git",
    "url": "git+https://github.com/thomaszhou63/test-npm.git"
  },
  "author": "thomaszhou",
  "license": "MIT",
  "devDependencies": {
    "babel-core": "^6.26.3",
    "babel-loader": "^7.1.5",
    "babel-preset-env": "^1.7.0",
    "css-loader": "^1.0.0",
    "file-loader": "^2.0.0",
    "style-loader": "^0.23.1",
    "url-loader": "^1.1.2",
    "node-sass": "^4.12.0",
    "sass-loader": "^7.2.0",
    "vue": "^2.5.2",
    "vue-hot-reload-api": "^2.2.4",
    "vue-html-loader": "^1.2.4",
    "vue-loader": "^15.4.2",
    "vue-style-loader": "^3.0.3",
    "vue-template-compiler": "^2.5.9",
    "webpack": "^4.19.0",
    "webpack-cli": "^3.1.0"
  }
}
```

- å‚æ•°è¯´æ˜
  - ```name``` - åŒ…åï¼ˆåŒ…ååº”è¯¥æ˜¯kebab-case, å³è‹±æ–‡å•è¯å…¨å°å†™æˆ–è€…ä¸­åˆ’çº¿åˆ†å‰²ï¼‰
  - ```version``` - åŒ…çš„ç‰ˆæœ¬å·ï¼ˆç¬¬ä¸€ç‰ˆå»ºè®®```1.0.0```ï¼Œå…·ä½“å‘½åè§„åˆ™[çœ‹è¿™é‡Œ](https://www.npmjs.cn/getting-started/semantic-versioning/)ï¼‰
  - ```description``` - åŒ…çš„æè¿°ã€‚åœ¨```npmjs.com```ä¸Šæœç´¢æ—¶ä¼šæ˜¾ç¤ºï¼Œæœ‰åŠ©äºç”¨æˆ·åœ¨æœç´¢æ—¶è¿›è¡Œç­›é€‰ï¼‰
  - ```keywords``` - å…³é”®å­—ï¼ˆåœ¨npmç½‘ç«™ä¸Šæœç´¢ä½ è¿™ä¸ªnpmåŒ…çš„å…³é”®è¯ï¼‰
  - ```author``` - åŒ…çš„ä½œè€…ã€‚æ ¼å¼ä¸€èˆ¬æ˜¯```name <ä½ çš„é‚®ç®±>```ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œç”¨```vue/react```è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®çš„æ—¶å€™ä¼šé»˜è®¤è¿™ä¸ªæ ¼å¼å†™æ³•, å½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªgithubåœ°å€ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ï¼Œä½†å°±ä¸é‚£ä¹ˆæ ‡å‡†äº†
  - ```license``` - ç‰ˆæƒè®¸å¯è¯ï¼Œ```MIT```è¿˜æ˜¯```ISC```ï¼Œæˆ–è€…å…¶ä»–éƒ½å¯ä»¥ï¼Œåªæ˜¯æˆ‘çœ‹å¾ˆå¤šåŒ…éƒ½æ˜¯```MIT```
  - ```contributors``` - åŒ…çš„å…¶ä»–è´¡çŒ®è€…(æˆ‘æ²¡æœ‰å†™è¿™ä¸ª)
  - ```repository``` - åŒ…ä»£ç çš„```Repo```ä¿¡æ¯ï¼ŒåŒ…æ‹¬```type```å’Œ```URL```ï¼Œ```type```å¯ä»¥æ˜¯```git```æˆ–```svn```ï¼Œ```URL```åˆ™æ˜¯åŒ…çš„```Repo```åœ°å€
    - æˆ‘è¿™é‡Œå†™çš„```git```ä»“åº“çš„åœ°å€ï¼Œæ”¾ç€æˆ‘çš„ç»„ä»¶é¡¹ç›®ä»£ç ï¼Œè¿™æ ·åœ¨npmåŒ…é¡µé¢å°±æœ‰ä¼šä¸ªgithubçš„å…¥å£
  - ```main``` - è¯¥å­—æ®µæŒ‡å®šäº†ç¨‹åºçš„ä¸»å…¥å£æ–‡ä»¶ï¼ˆæœ€å¥½å†™```distæ–‡ä»¶å¤¹```å†…å·²ç»å‹ç¼©åçš„æ–‡ä»¶ï¼‰
    - ```main```å®šä¹‰äº†åŒ…çš„å…¥å£æ–‡ä»¶ï¼Œåœ¨```NodeJs```ç¯å¢ƒä¸­ï¼Œè¯­å¥```import [pkg] from '[package]'```æ—¶ï¼Œå…¶å®å¯¼å…¥çš„å°±æ˜¯mainå®šä¹‰çš„æ–‡ä»¶
  - ```scripts``` - æŒ‡å®šäº†è¿è¡Œè„šæœ¬å‘½ä»¤çš„npmå‘½ä»¤è¡Œç¼©å†™ã€‚å¦‚ ```npm start```ã€```npm run dev```ã€```npm run build```ç­‰
  - ```dependencies``` / ```devDependencies``` - ç”Ÿäº§/å¼€å‘ç¯å¢ƒä¾èµ–åŒ…åˆ—è¡¨ã€‚å®ƒä»¬å°†ä¼šè¢«å®‰è£…åœ¨ ```node_module``` ç›®å½•ä¸‹
    - å¯¹äºä¸€ä¸ªå¼€å‘è€…æ¥è¯´ï¼Œ```dependencies```å’Œ```devDependencies```å…¶å®æ²¡å¤ªå¤šåŒºåˆ«ï¼Œå› ä¸ºåœ¨æ‰§è¡Œ```npm install/yarn add```æ—¶éƒ½ä¼šå…¨éƒ¨ä¸‹è½½
    - ```dependencies``` æ˜¯è¿è¡Œä½ çš„åŒ…å¿…é¡»å®‰è£…çš„ä¾èµ–ï¼Œå³å½“ç”¨æˆ·```npm install [package]```æˆ–è€…```yarn add [package]```æ—¶ï¼Œè¿™äº›ä¾èµ–ä¹Ÿä¼šä¸‹è½½
    - **```devDependencies``` æ˜¯å¼€å‘ä½ çš„åŒ…æ—¶éœ€è¦å®‰è£…çš„ä¾èµ–ï¼Œæ¯”å¦‚`eslint`, `jest`ç­‰å¼€å‘å·¥å…·ï¼Œå½“ç”¨æˆ·```npm install [package]```æˆ–```yarn add [package]``` æ—¶ï¼Œè¿™äº›ä¾èµ–å¹¶ä¸ä¼šä¸‹è½½ï¼**

> æˆ‘è¿™é‡Œç‰ˆæœ¬æ˜¯1.0.1ï¼Œæ˜¯å› ä¸ºæˆ‘è‡ªå·±åé¢è¿­ä»£äº†ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€ç‰ˆï¼Œæœ€å¥½æ˜¯1.0.0

![our-btn](../../assets/imgs/topics/npm&&webpack/our-btn.png)

- **ï¼ˆ6ï¼‰```README.md```**

è¿™æ˜¯æˆ‘çš„```README.md```å†™çš„ä¸œè¥¿ï¼Œæœ€ç»ˆéƒ½ä¼šæ˜¾ç¤ºåœ¨npmçš„å†…å®¹ä»‹ç»é‡Œé¢ï¼ˆä¹Ÿå°±æ˜¯ä¸Šå›¾ï¼‰ï¼Œå„ä½ç«¥é‹å¦‚æœå‘åŒ…ï¼Œä¹Ÿè¯·å†™å¥½```README.md```å“ˆï¼Œæ¯•ç«Ÿæ˜¯ç»™äººä½¿ç”¨çš„å˜›

```
## our-btn
>ä¸€ä¸ªæµ‹è¯•çš„npmåŒ…

# install

â€‹```
npm install our-btn
â€‹```
# use
â€‹```
// main.js
import btn from 'our-btn'

Vue.use(btn)
â€‹```
â€‹```
// demo.js
<template>
  <div class="demo">
    <btn :text="msg"></btn>
  </div>
</template>

<script>
export default {
  name: 'demo',
  data () {
    return {
      msg: 'æˆåŠŸ'
    }
  }
}
</script>
â€‹```
```

- **ï¼ˆ7ï¼‰```.npmignore```**

è¿™ä¸ªæ–‡ä»¶åŒ```.gitignore```çš„åŠŸèƒ½ä¸€æ ·ï¼Œ```.gitignore```æ˜¯å¿½ç•¥è‡ªé€‰çš„æ–‡ä»¶ä¸Šä¼ åˆ°githubä»“åº“ä¸­ï¼Œè€Œ```.npmignore```åˆ™æ˜¯å¿½ç•¥è‡ªé€‰çš„æ–‡ä»¶ä¸Šä¼ åˆ°npmä¸Šã€‚

ä½†æ˜¯å‘¢ï¼Œå¦‚æœä½ çš„é¡¹ç›®æ²¡æœ‰```.npmignore```æ–‡ä»¶ï¼Œä½†æœ‰ `.gitignore`æ–‡ä»¶ï¼Œåˆ™å‘å¸ƒæ—¶ä¼šå¿½ç•¥ `.gitignore`ä¸­å®šä¹‰çš„æ–‡ä»¶;ä¹Ÿå°±æ˜¯è¯´ï¼Œ```.npmignore```çš„ä¼˜å…ˆçº§æ˜¯é«˜äº```.gitignore```çš„ã€‚ 

```
.*
*.md
node_modules/
webpack.config.js
src/
```

- **ï¼ˆ8ï¼‰å®‰è£…ä¾èµ–**

ä»¥ä¸Šæ–‡ä»¶éƒ½é…ç½®å¥½åå°±å¯ä»¥è¿è¡Œä¸‹é¢å‘½ä»¤å®‰è£…```package.json```çš„ä¾èµ–äº†ï¼Œç„¶åå°±ä¼šåœ¨ä½ ä»¬çš„ç›®å½•ä¸­ç”Ÿæˆ```node_modules```æ–‡ä»¶å¤¹ã€```package-lock.json```æ–‡ä»¶

```js
npm install
```

- **ï¼ˆ9ï¼‰æ‰“åŒ…æˆ‘ä»¬çš„ç»„ä»¶**

```js
npm run build
```

- **(10) ç›®å½•ç»“æ„**

ä¸‹å›¾å°±æ˜¯æˆ‘çš„ç›®å½•ç»“æ„ï¼Œå…¶ä¸­```.gitattributes```å’Œ```.gitignore```æ–‡ä»¶ä½ å¯ä»¥å¿½ç•¥ï¼Œå› ä¸ºæˆ‘æŠŠè¿™ä¸ªé¡¹ç›®æ”¾åœ¨githubä»“åº“ï¼Œæ‰€ä»¥æ‰ä¼šæœ‰è¿™ä¸¤ä¸ªæ–‡ä»¶çš„ã€‚

![btnç›®å½•](../../assets/imgs/topics/npm&&webpack/btnç›®å½•.png)

## æœ¬åœ°æµ‹è¯•ç»„ä»¶æ˜¯å¦å¯ä»¥ç”¨

åœ¨é¡¹ç›®ä¸­æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤

```js
npm run build // æ‰“åŒ…
npm pack // æœ¬åœ°ç”Ÿæˆä¸€ä¸ªour-btn-1.0.1.tgzçš„åŒ…
```

ä½ è‡ªå·±åœ¨ä½ æœ¬åœ°æ–°å»ºä¸€ä¸ª```vue/react```é¡¹ç›®ï¼Œå› ä¸ºæˆ‘æ˜¯vueç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘å°±æ–°å»ºä¸€ä¸ªvueé¡¹ç›®ï¼Œå–åä¸º```test-btn```ï¼Œæˆ‘ä»¬æŠŠ```our-btn-1.0.1.tgz```æ”¾è¿›æˆ‘ä»¬çš„æœ¬åœ°é¡¹ç›®```test-btn```ä¸­

```js
npm install our-btn-1.0.1.tgz
npm run dev // å¯åŠ¨vueé¡¹ç›®
```

ç„¶ååœ¨é¡¹ç›®çš„```main.js```å¼•å…¥æˆ‘ä»¬çš„åŒ…

```js
// src/main.js
// æ³¨æ„ï¼šbtnè¦ä¿æŒå’Œä¹‹å‰å’±ä»¬å°è£…ç»„ä»¶çš„index.jsä¸€æ ·
import btn from 'our-btn' // å¼•å…¥åŒ…

Vue.use(btn)
```

åœ¨æˆ‘ä»¬demoé¡µé¢ä¸­å¼•ç”¨è¿™ä¸ªç»„ä»¶

```js
// demo.vue
<template>
  <div class="demo">
    <btn :text="msg"></btn> 
  </div>
</template>

<script>
export default {
  name: 'demo',
  data () {
    return {
      msg: 'æˆåŠŸ'
    }
  }
}
</script>
```

è‹¥æµ‹è¯•å¯ç”¨ï¼Œåœ¨æµ‹è¯•é¡¹ç›®```test-btn```ä¸­è¿è¡Œ```npm uninstall our-btn```å¸è½½æ’ä»¶ï¼Œç„¶åé‚£ä¹ˆå°±å¯ä»¥å‘å¸ƒåˆ°npmåŒ…ä¸Šäº†

## å‘å¸ƒåˆ°npm

- **ï¼ˆ1ï¼‰æ³¨å†Œnpmè´¦å·**

å‘å¸ƒä¹‹å‰ï¼Œä½ å¾—æ³¨å†Œä¸€ä¸ªnpmè´¦å·å§ï¼Œä¸ç„¶ä½ æ€ä¹ˆä¸Šä¼ å‘¢ï¼Œå»ºè®®ä¸Š[å®˜ç½‘æ³¨å†Œ](https://www.npmjs.com/signup)ä¸€ä¸ªè´¦å·ï¼ˆé¡ºä¾¿ç†Ÿæ‚‰é‚£ä¸ªç½‘ç«™ï¼‰ï¼Œæ³¨å†Œå®Œè´¦å·ä¹‹åï¼Œæˆ‘ä»¬å°±è¦åœ¨æœ¬åœ°ç™»å½•å¹¶å‘å¸ƒæˆ‘ä»¬çš„ç»„ä»¶äº†

> æç¤ºï¼šå› ä¸ºæœ‰ç‚¹ç«¥é‹ä¼šç»å¸¸ç”¨cnpmæºï¼Œæ‰€ä»¥å‘¢ï¼Œ**ä¸€å®šè¦åˆ‡æ¢åˆ°npmæºä¸Šæ‰å¯ä»¥**ï¼Œä¸ç„¶å°±ä¼šæŠ¥å‡ºå¦‚ä¸‹é”™è¯¯
>
> ```js
> error: no_perms Private mode enable, only admin can publish this module
> ```
>
> å› æ­¤ä½ è¦åˆ‡æ¢åˆ°npmæºï¼Œé€šè¿‡```npm config set registry http://registry.npmjs.org ```å‘½ä»¤

- **ï¼ˆ2ï¼‰å¼€å§‹å‘å¸ƒ**

åœ¨å‘åŒ…ä¹‹å‰ï¼Œå…ˆå»[npmå®˜ç½‘]([https://www.npmjs.com](https://www.npmjs.com/))æœç´¢ä¸€ä¸‹æœ‰æ²¡æœ‰å’Œä½ åŒ…åç›¸åŒçš„ï¼Œå¦‚æœç›¸åŒå°±æ”¹ä¸€ä¸ªå…¶ä»–çš„åå­—å§

```js
npm login // ç™»é™†npm
// ç„¶åè¾“å…¥ä½ çš„è´¦å·ã€å¯†ç ã€é‚®ç®±
// å½“ä½ åœ¨æ§åˆ¶å°çœ‹åˆ° Logged in as <Username> on https://registry.npmjs.org  è¯´æ˜ç™»é™†æˆåŠŸ

// å¦‚æœä½ ä¿è¯æ˜¯æœ€æ–°ç‰ˆæœ¬ä¸”å·²ç»æ‰“åŒ…è¿‡ï¼Œåˆ™è·³è¿‡npm run buildè¿™ä¸€æ­¥
npm run build 
npm publish // å‘å¸ƒä½ çš„åŒ…ï¼ˆå¦‚æœä½ å‡ºç°ğŸ‘‡ï¼Œæ˜¾ç¤º +[package]@ç‰ˆæœ¬ä¿¡æ¯ ï¼Œé‚£å°±å‘å¸ƒæˆåŠŸäº†ï¼‰
```

ğŸ‘‡è¿™æ˜¯æˆ‘çš„è¾“å…¥åŠå…¶å¯¹åº”æ˜¾ç¤ºçš„ä¸œè¥¿

![npm](../../assets/imgs/topics/npm&&webpack/npm.png)

![npm publish](../../assets/imgs/topics/npm&&webpack/npmPublish.png)



æ­¤æ—¶æ­¤åˆ»ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰**```æˆ‘ä»¬çš„åŒ…å‘å¸ƒæˆåŠŸäº†```**ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰ğŸ‰



> âš ï¸**æ‹“å±•çŸ¥è¯†**ï¼šä¸€ä¸ªç‰ˆæœ¬åªèƒ½å‘å¸ƒä¸€æ¬¡ï¼Œä¹Ÿå°±æ˜¯ä½ ä¸èƒ½å‘äº†```1.0.0```ï¼Œä¸‹æ¬¡è¿˜ç»§ç»­```1.0.0```ï¼Œç†è®ºä¸Šå¯ä»¥è¦†ç›–ï¼Œä½†æ˜¯npmä¸å…è®¸è¿™æ ·ï¼Œå› ä¸ºä½ è¿™æ ·è¦†ç›–ï¼Œå°±æ— æ³•çŸ¥é“ä½ çš„ç‰ˆæœ¬ä¿¡æ¯äº†å•Šï¼Œæ’ä»¶å’Œé¡¹ç›®éƒ½æ˜¯è¿­ä»£çš„ï¼Œlike gitï¼Œå®¤å‹ç‰ˆæœ¬ä¿¡æ¯çš„ã€‚
>
> â€‹    æ–¹æ³•ä¸€ï¼šæ¯ä¸€æ¬¡```npm publish```å‰ï¼Œè‡ªè¡Œæ‰‹åŠ¨æ›´æ”¹```package.json```çš„version
>
> â€‹	æ–¹æ³•äºŒï¼šé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥å‘å¸ƒ
>
> ```js
> å‡è®¾åˆå§‹ç‰ˆæœ¬ä¸º1.0.0
> âœ npm version preminor ï¼ˆæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå°±ä¼šä»·æ ¼å½“å‰åŒ…å‘å¸ƒä¸ºç‰ˆæœ¬v0.1.0-0ï¼‰
> v1.0.0-0
> âœ npm version prepatch
> v1.0.1-0
> âœ npm version patch    ï¼ˆæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œå°±ä¼šä»·æ ¼å½“å‰åŒ…å‘å¸ƒä¸ºç‰ˆæœ¬v1.0.1ï¼‰
> v1.0.1
> ```

## æŸ¥çœ‹npm && ä½¿ç”¨æˆ‘ä»¬çš„åŒ…

â€‹	è¿™ä¸ªæ—¶å€™ï¼Œä½ ç¨å¾®ç­‰å‡ åˆ†é’Ÿå»[npmå®˜ç½‘]([https://www.npmjs.com](https://www.npmjs.com/))æœç´¢ä¸€ä¸‹ä½ çš„åŒ…åå­—ï¼Œå°±å¯ä»¥æ‰¾åˆ°å•¦ã€‚å¦‚æœæœä¸åˆ°ï¼Œé‚£å°±å†ç­‰ç­‰ï¼Œæˆ–è®¸æ›´æ–°æ…¢ï¼Œæ²¡æœ‰å®Œå…¨æ›´æ–°ï¼Œä½†æ˜¯ä½ åœ¨è‡ªå·±npmè´¦å·å¯ä»¥æŸ¥çœ‹åˆ°è‡ªå·±å‘å¸ƒçš„åŒ…

â€‹	ä½ è‡ªå·±åœ¨ä½ æœ¬åœ°æ–°å»ºä¸€ä¸ª```vue/react```é¡¹ç›®ï¼Œå› ä¸ºæˆ‘æ˜¯vueç»„ä»¶ï¼Œæ‰€ä»¥æˆ‘å°±æ–°å»ºä¸€ä¸ªvueé¡¹ç›®ï¼Œå…·ä½“ä½¿ç”¨åŒ…çš„æ–¹æ³•å°±æ˜¯ï¼ˆä»¥æˆ‘çš„æµ‹è¯•åŒ…ä¸ºä¾‹ï¼‰

```js
npm install our-btn // å®‰è£…æˆ‘ä»¬çš„åŒ…
```

```js
// src/main.js
// æ³¨æ„ï¼šbtnè¦ä¿æŒå’Œä¹‹å‰å’±ä»¬å°è£…ç»„ä»¶çš„index.jsä¸€æ ·
import btn from 'our-btn' // å¼•å…¥åŒ…

Vue.use(btn)
```

```js
// demo.vue
<template>
  <div class="demo">
    <btn :text="msg"></btn> 
  </div>
</template>

<script>
export default {
  name: 'demo',
  data () {
    return {
      msg: 'æˆåŠŸ'
    }
  }
}
</script>
```

```å¦‚æœé”™è¯¯è¯·æŒ‡æ­£ï¼Œæˆ‘ä¹Ÿå¥½çº é”™æ›´æ–°```

```å¦‚æœ‰è®²çš„ä¸æ˜ç™½çš„ï¼Œè¯·ç•™è¨€ï¼Œæˆ‘çœ‹åˆ°ä¼šå›å¤```

over